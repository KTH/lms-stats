<!DOCTYPE html>

<html lang="en">

<head>

<meta charset="utf-8"/>

<script src="moment.js"></script>

<title>School admin in Canvas</title>

</head>

<body>

<h1>KTH School admin in KTH LMS Canvas</h1>

<h2>ABE</h2>

<table>
  <thead>
    <tr>
      <th>Name</th><th>Role</th><th>E-mail</th>
    </tr>
  </thead>
  <tbody id="abe">
  </tbody>
</table>

<h2>CBH</h2>

<table>
  <thead>
    <tr>
      <th>Name</th><th>Role</th><th>E-mail</th>
    </tr>
  </thead>
  <tbody id="cbh">
  </tbody>
</table>


<h2>EECS</h2>

<table>
  <thead>
    <tr>
      <th>Name</th><th>Role</th><th>E-mail</th>
    </tr>
  </thead>
  <tbody id="eecs">
  </tbody>
</table>

<h2>ITM</h2>

<table>
  <thead>
    <tr>
      <th>Name</th><th>Role</th><th>E-mail</th>
    </tr>
  </thead>
  <tbody id="itm">
  </tbody>
</table>

<h2>SCI</h2>

<table>
  <thead>
    <tr>
      <th>Name</th><th>Role</th><th>E-mail</th>
    </tr>
  </thead>
  <tbody id="sci">
  </tbody>
</table>

<script>

// Const accounts

const accounts={
  14:'ABE',
  17:'CBH',
  22:'CBH',
  23:'EECS',
  24:'ITM',
  25:'EECS',
  26:'EECS',
  27:'ITM',
  28:'SCI',
  29:'CBH'
}

    async function drawGraph(){


    const responseABEADM = await fetch('/api/lms-stats/abeadm')
    const myJsonABEADM = await responseABEADM.json()

    var orderABEADM = myJsonABEADM;

    orderABEADM.sort(function(a, b) {
      var nameA = a.user.name.toUpperCase();
      var nameB = b.user.name.toUpperCase();
      if (nameA < nameB) {
        return -1;
      }
      if (nameA > nameB) {
        return 1;
      }

      return 0;

    });

// Create hyperlinked list

    var text = "";
    var i;
    for (i = 0; i < orderABEADM.length; i++) {
        text += "<tr><td><a href=\"https://kth.instructure.com/accounts/1/users/" + orderABEADM[i].user.id + "/\" target=\"_blank\">" + orderABEADM[i].user.name + "</a></td><td>" + orderABEADM[i].role + "</a></td><td>" + orderABEADM[i].user.login_id + "</td></tr>";
    }

    document.getElementById("abe").innerHTML = text;



        const responseCBHADM = await fetch('/api/lms-stats/cbhadm')
        const myJsonCBHADM = await responseCBHADM.json()

        var orderCBHADM = myJsonCBHADM;

        orderCBHADM.sort(function(a, b) {
          var nameA = a.user.name.toUpperCase();
          var nameB = b.user.name.toUpperCase();
          if (nameA < nameB) {
            return -1;
          }
          if (nameA > nameB) {
            return 1;
          }

          return 0;

        });

    // Create hyperlinked list

        var text = "";
        var i;
        for (i = 0; i < orderCBHADM.length; i++) {
            text += "<tr><td><a href=\"https://kth.instructure.com/accounts/1/users/" + orderCBHADM[i].user.id + "/\" target=\"_blank\">" + orderCBHADM[i].user.name + "</a></td><td>" + orderCBHADM[i].role + "</a></td><td>" + orderCBHADM[i].user.login_id + "</td></tr>";
        }

        document.getElementById("cbh").innerHTML = text;


            const responseEECSADM = await fetch('/api/lms-stats/eecsadm')
            const myJsonEECSADM = await responseEECSADM.json()

            var orderEECSADM = myJsonEECSADM;

            orderEECSADM.sort(function(a, b) {
              var nameA = a.user.name.toUpperCase();
              var nameB = b.user.name.toUpperCase();
              if (nameA < nameB) {
                return -1;
              }
              if (nameA > nameB) {
                return 1;
              }

              return 0;

            });

        // Create hyperlinked list

            var text = "";
            var i;
            for (i = 0; i < orderEECSADM.length; i++) {
                text += "<tr><td><a href=\"https://kth.instructure.com/accounts/1/users/" + orderEECSADM[i].user.id + "/\" target=\"_blank\">" + orderEECSADM[i].user.name + "</a></td><td>" + orderEECSADM[i].role + "</a></td><td>" + orderEECSADM[i].user.login_id + "</td></tr>";
            }

            document.getElementById("eecs").innerHTML = text;



                const responseITMADM = await fetch('/api/lms-stats/itmadm')
                const myJsonITMADM = await responseITMADM.json()

                var orderITMADM = myJsonITMADM;

                orderITMADM.sort(function(a, b) {
                  var nameA = a.user.name.toUpperCase();
                  var nameB = b.user.name.toUpperCase();
                  if (nameA < nameB) {
                    return -1;
                  }
                  if (nameA > nameB) {
                    return 1;
                  }

                  return 0;

                });

            // Create hyperlinked list

                var text = "";
                var i;
                for (i = 0; i < orderITMADM.length; i++) {
                    text += "<tr><td><a href=\"https://kth.instructure.com/accounts/1/users/" + orderITMADM[i].user.id + "/\" target=\"_blank\">" + orderITMADM[i].user.name + "</a></td><td>" + orderITMADM[i].role + "</a></td><td>" + orderITMADM[i].user.login_id + "</td></tr>";
                }

                document.getElementById("itm").innerHTML = text;



                    const responseSCIADM = await fetch('/api/lms-stats/sciadm')
                    const myJsonSCIADM = await responseSCIADM.json()

                    var orderSCIADM = myJsonSCIADM;

                    orderSCIADM.sort(function(a, b) {
                      var nameA = a.user.name.toUpperCase();
                      var nameB = b.user.name.toUpperCase();
                      if (nameA < nameB) {
                        return -1;
                      }
                      if (nameA > nameB) {
                        return 1;
                      }

                      return 0;

                    });

                // Create hyperlinked list

                    var text = "";
                    var i;
                    for (i = 0; i < orderSCIADM.length; i++) {
                        text += "<tr><td><a href=\"https://kth.instructure.com/accounts/1/users/" + orderSCIADM[i].user.id + "/\" target=\"_blank\">" + orderSCIADM[i].user.name + "</a></td><td>" + orderSCIADM[i].role + "</a></td><td>" + orderSCIADM[i].user.login_id + "</td></tr>";
                    }

                    document.getElementById("sci").innerHTML = text;



//

      }

drawGraph()

</script>


</body>

</html>
