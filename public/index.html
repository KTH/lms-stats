<script>


async function drawGraph(){
  const responseKTHS = await fetch('/api/lms-stats/kths')
  const myJsonKTHS = await responseKTHS.json()
  const responseKTHA = await fetch('/api/lms-stats/ktha')
  const myJsonKTHA = await responseKTHA.json()
  const responseABES = await fetch('/api/lms-stats/abes')
  const myJsonABES = await responseABES.json()
  const responseABESL = await fetch('/api/lms-stats/abesl')
  const myJsonABESL = await responseABESL.json()
  const responseBIOS = await fetch('/api/lms-stats/bios')
  const myJsonBIOS = await responseBIOS.json()
  const responseBIOSL = await fetch('/api/lms-stats/biosl')
  const myJsonBIOSL = await responseBIOSL.json()
  const responseCHES = await fetch('/api/lms-stats/ches')
  const myJsonCHES = await responseCHES.json()
  const responseCHESL = await fetch('/api/lms-stats/chesl')
  const myJsonCHESL = await responseCHESL.json()
  const responseCSCS = await fetch('/api/lms-stats/cscs')
  const myJsonCSCS = await responseCSCS.json()
  const responseCSCSL = await fetch('/api/lms-stats/cscsl')
  const myJsonCSCSL = await responseCSCSL.json()
  const responseECES = await fetch('/api/lms-stats/eces')
  const myJsonECES = await responseECES.json()
  const responseECESL = await fetch('/api/lms-stats/ecesl')
  const myJsonECESL = await responseECESL.json()
  const responseEESS = await fetch('/api/lms-stats/eess')
  const myJsonEESS = await responseEESS.json()
  const responseEESSL = await fetch('/api/lms-stats/eessl')
  const myJsonEESSL = await responseEESSL.json()
  const responseICTS = await fetch('/api/lms-stats/icts')
  const myJsonICTS = await responseICTS.json()
  const responseICTSL = await fetch('/api/lms-stats/ictsl')
  const myJsonICTSL = await responseICTSL.json()
  const responseITMS = await fetch('/api/lms-stats/itms')
  const myJsonITMS = await responseITMS.json()
  const responseITMSL = await fetch('/api/lms-stats/itmsl')
  const myJsonITMSL = await responseITMSL.json()
  const responseSCIS = await fetch('/api/lms-stats/scis')
  const myJsonSCIS = await responseSCIS.json()
  const responseSCISL = await fetch('/api/lms-stats/scisl')
  const myJsonSCISL = await responseSCISL.json()
  const responseSTHS = await fetch('/api/lms-stats/sths')
  const myJsonSTHS = await responseSTHS.json()
  const responseSTHSL = await fetch('/api/lms-stats/sthsl')
  const myJsonSTHSL = await responseSTHSL.json()
  const responseUF = await fetch('/api/lms-stats/ufs')
  const myJsonUF = await responseUF.json()

new Chartist.Bar('.ct-chart1', {
    labels: ['Published courses','Active Teachers','Active Students','Discussion Posts','Video/audio recordings','Uploaded files','Student submissions'],
    series: [myJsonKTHS[0].courses,myJsonKTHS[0].teachers,myJsonKTHS[0].students,myJsonKTHS[0].discussion_topics,myJsonKTHS[0].media_objects,myJsonKTHS[0].attachments,myJsonKTHS[0].assignments]
  }, {
    distributeSeries: true,
      chartPadding: {
        right: 40,
        left: 40,
        top: 40,
        bottom: 40
      },
      axisY: {
        labelInterpolationFnc: function(value) {
          return (value / 1000) + 'k';
      }
  },
      plugins: [
        Chartist.plugins.ctBarLabels(
          {
            labelOffset: {
              y: -5
            },
          })
        ],
  });






  new Chartist.Bar('.ct-chart2', {
    labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI','UF'],
    series: [
      [myJsonABES[0].courses, myJsonCSCS[0].courses, myJsonITMS[0].courses, myJsonCHES[0].courses, myJsonSCIS[0].courses, myJsonUF[0].courses],
      [0, myJsonEESS[0].courses, myJsonECES[0].courses, myJsonBIOS[0].courses, 0, 0],
      [0, myJsonICTS[0].courses, 0, myJsonSTHS[0].courses, 0, 0]
    ]
  },


  {
    stackBars: true,

    chartPadding: {
      right: 40,
      left: 40,
      top: 40,
      bottom: 40
    },

      plugins: [
        Chartist.plugins.ctBarLabels(
          {
            labelOffset: {
              y: 17
            },
              labelClass: 'ct-label-white',
            })
          ],

  });

  new Chartist.Bar('.ct-chart10', {
    labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI'],
    series: [
      [myJsonABESL[0].courses, myJsonCSCSL[0].courses, myJsonITMSL[0].courses, myJsonCHESL[0].courses, myJsonSCISL[0].courses],
      [0, myJsonEESSL[0].courses, myJsonECESL[0].courses, myJsonBIOSL[0].courses, 0],
      [0, myJsonICTSL[0].courses, 0, myJsonSTHSL[0].courses, 0]
    ]
  }, {
    stackBars: true,

    chartPadding: {
      right: 40,
      left: 40,
      top: 40,
      bottom: 40
    },
      plugins: [
        Chartist.plugins.ctBarLabels(
          {
            labelOffset: {
              y: 17
            },
              labelClass: 'ct-label-white',
            })
          ],
  });

  new Chartist.Bar('.ct-chart3', {
    labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI','UF'],
    series: [
      [myJsonABES[0].teachers, myJsonCSCS[0].teachers, myJsonITMS[0].teachers, myJsonCHES[0].teachers, myJsonSCIS[0].teachers, myJsonUF[0].teachers],
      [0, myJsonEESS[0].teachers, myJsonECES[0].teachers, myJsonBIOS[0].teachers, 0, 0],
      [0, myJsonICTS[0].teachers, 0, myJsonSTHS[0].teachers, 0, 0]
    ]
  }, {
    stackBars: true,
      showLabel: true,
      chartPadding: {
        right: 40,
        left: 40,
        top: 40,
        bottom: 40
      },

      plugins: [
        Chartist.plugins.ctBarLabels(
          {
            labelOffset: {
              y: 17
            },
            labelClass: 'ct-label-white',
          })
        ],
      });

    new Chartist.Bar('.ct-chart4', {
      labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI', 'UF'],
      series: [
        [myJsonABES[0].students, myJsonCSCS[0].students, myJsonITMS[0].students, myJsonCHES[0].students, myJsonSCIS[0].students, myJsonUF[0].students],
        [0, myJsonEESS[0].students, myJsonECES[0].students, myJsonBIOS[0].students, 0, 0],
        [0, myJsonICTS[0].students, 0, myJsonSTHS[0].students, 0, 0]
      ]
    },
    {
      stackBars: true,
        showLabel: true,
        chartPadding: {
          right: 40,
          left: 40,
          top: 40,
          bottom: 40
        },
        plugins: [
          Chartist.plugins.ctBarLabels(
            {
              labelOffset: {
                y: 17
              },
              labelClass: 'ct-label-white',
            })
          ],
        });
  
  
  new Chartist.Bar('.ct-chart5', {
    labels: ['Announcements','Assignments','Discussions','Files','Grades','Groups','Modules','Pages','Quizzes'],
    series: [myJsonKTHA[0].by_category[0].views, myJsonKTHA[0].by_category[1].views, myJsonKTHA[0].by_category[4].views, myJsonKTHA[0].by_category[5].views, myJsonKTHA[0].by_category[7].views, myJsonKTHA[0].by_category[8].views, myJsonKTHA[0].by_category[9].views, myJsonKTHA[0].by_category[11].views, myJsonKTHA[0].by_category[12].views]
  }, {
    distributeSeries: true,
    chartPadding: {
      right: 40,
      left: 40,
      top: 40,
      bottom: 40
    },
    plugins: [
      Chartist.plugins.ctBarLabels(
        {
          labelOffset: {
            y: -5
          },
        })
      ],
      axisY: {
        labelInterpolationFnc: function(value) {
          return (value / 1000000) + 'M';
        }
      }

  });



  new Chartist.Bar('.ct-chart6', {
    labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI', 'UF'],
    series: [
      [myJsonABES[0].attachments, myJsonCSCS[0].attachments, myJsonITMS[0].attachments, myJsonCHES[0].attachments, myJsonSCIS[0].attachments, myJsonUF[0].attachments],
      [0, myJsonEESS[0].attachments, myJsonECES[0].attachments, myJsonBIOS[0].attachments, 0, 0],
      [0, myJsonICTS[0].attachments, 0, myJsonSTHS[0].attachments, 0, 0]
    ]
  },
  {
    stackBars: true,
      showLabel: true,
      chartPadding: {
        right: 40,
        left: 40,
        top: 40,
        bottom: 40
      },
      plugins: [
        Chartist.plugins.ctBarLabels(
          {
            labelOffset: {
              y: 17
            },
            labelClass: 'ct-label-white',
          })
        ],
      });

      new Chartist.Bar('.ct-chart7', {
        labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI', 'UF'],
        series: [
          [myJsonABES[0].assignments, myJsonCSCS[0].assignments, myJsonITMS[0].assignments, myJsonCHES[0].assignments, myJsonSCIS[0].assignments, myJsonUF[0].assignments],
          [0, myJsonEESS[0].assignments, myJsonECES[0].assignments, myJsonBIOS[0].assignments, 0, 0],
          [0, myJsonICTS[0].assignments, 0, myJsonSTHS[0].assignments, 0, 0]
        ]
      },
      {
        stackBars: true,
          showLabel: true,
          chartPadding: {
            right: 40,
            left: 40,
            top: 40,
            bottom: 40
          },
          plugins: [
            Chartist.plugins.ctBarLabels(
              {
                labelOffset: {
                  y: 17
                },
                labelClass: 'ct-label-white',
              })
            ],
          });

  new Chartist.Bar('.ct-chart8', {
    labels: ['ABE', 'EECS (CSC+EES+ICT)', 'ITM (ITM+ECE)', 'CBH (CHE+BIO+STH)','SCI', 'UF'],
    series: [
      [myJsonABES[0].discussion_topics, myJsonCSCS[0].discussion_topics, myJsonITMS[0].discussion_topics, myJsonCHES[0].discussion_topics, myJsonSCIS[0].discussion_topics, myJsonUF[0].discussion_topics],
      [0, myJsonEESS[0].discussion_topics, myJsonECES[0].discussion_topics, myJsonBIOS[0].discussion_topics, 0, 0],
      [0, myJsonICTS[0].discussion_topics, 0, myJsonSTHS[0].discussion_topics, 0, 0]
    ]
  },
  {
    stackBars: true,
      showLabel: true,
      chartPadding: {
        right: 40,
        left: 40,
        top: 40,
        bottom: 40
      },
      plugins: [
        Chartist.plugins.ctBarLabels(
          {
            labelOffset: {
              y: 17
            },
            labelClass: 'ct-label-white',
          })
        ],
      });

      }
drawGraph()

</script>
